# Ping the deployed site every 5 days to keep Supabase from pausing (inactivity limit ~7 days).
# Add your live site URL as a repository secret: SITE_URL (e.g. https://your-app.vercel.app)

name: Ping site (keep Supabase active)

on:
  schedule:
    # Run at 00:00 UTC every 5 days (0th, 5th, 10th, 15th, 20th, 25th, 30th)
    - cron: "0 0 */5 * *"
  workflow_dispatch: # Allow manual run from Actions tab

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Ping site
        run: |
          URL="${{ secrets.SITE_URL }}"
          if [ -z "$URL" ]; then
            echo "SITE_URL secret not set. Add it in repo Settings → Secrets and variables → Actions."
            exit 1
          fi
          echo "Pinging $URL ..."
          curl -sf -o /dev/null -w "%{http_code}" --max-time 30 "$URL" || true
          echo " Done."
